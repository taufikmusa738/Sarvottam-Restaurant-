<!DOCTYPE html>
<html lang="en">
<head>
┬а┬а┬а┬а<meta charset="UTF-8">
┬а┬а┬а┬а<meta name="viewport" content="width=device-width, initial-scale=1.0">
┬а┬а┬а┬а<title>Sarvottam Restaurant Delivery App</title>
┬а┬а┬а┬а<!-- Tailwind CSS CDN for styling -->
┬а┬а┬а┬а<script src="https://cdn.tailwindcss.com"></script>
┬а┬а┬а┬а<script>
┬а┬а┬а┬а┬а┬а┬а┬аtailwind.config = {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtheme: {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аextend: {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcolors: {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// Sarvottam рдХреЗ рд▓реЛрдЧреЛ рдХреЗ рд░рдВрдЧ (рдирд╛рд░рдВрдЧреА/рднреВрд░рд╛ рдФрд░ рд╣рд░рд╛) рд╕реЗ рдореЗрд▓ рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а'primary': '#F47E3C', // Sarvottam Orange/Brown
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а'secondary': '#FEF3C7', // рдХрдВрдЯреНрд░рд╛рд╕реНрдЯ рдХреЗ рд▓рд┐рдП рд╣рд▓реНрдХрд╛ рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а'accent': '#367C33', // Sarvattam Green
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а},
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аfontFamily: {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аsans: ['Inter', 'sans-serif'],
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а},
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а</script>
┬а┬а┬а┬а<!-- Firebase SDKs -->
┬а┬а┬а┬а<script type="module">
┬а┬а┬а┬а┬а┬а┬а┬а// рдЖрд╡рд╢реНрдпрдХ Firebase рдореЙрдбреНрдпреВрд▓ рдХреЛ рдЗрдВрдкреЛрд░реНрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬аimport { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
┬а┬а┬а┬а┬а┬а┬а┬аimport { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
┬а┬а┬а┬а┬а┬а┬а┬аimport { getFirestore, doc, getDoc, addDoc, setDoc, updateDoc, onSnapshot, collection, query, where, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

┬а┬а┬а┬а┬а┬а┬а┬а// Firebase Canvas рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╕реЗ рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдП рдЧрдП рдЧреНрд▓реЛрдмрд▓ рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ (рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рдирд╛ рдЕрдирд┐рд╡рд╛рд░реНрдп рд╣реИ)
┬а┬а┬а┬а┬а┬а┬а┬аconst appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
┬а┬а┬а┬а┬а┬а┬а┬аconst firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
┬а┬а┬а┬а┬а┬а┬а┬аconst initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

┬а┬а┬а┬а┬а┬а┬а┬аlet app, db, auth, userId = null;
┬а┬а┬а┬а┬а┬а┬а┬аlet isAuthReady = false;
┬а┬а┬а┬а┬а┬а┬а┬аlet userName = ''; // рдпреВрдЬрд╝рд░ рдХрд╛ рдирд╛рдо рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡реЗрд░рд┐рдПрдмрд▓

┬а┬а┬а┬а┬а┬а┬а┬а// --- рдРрдк рд╕реНрдЯреЗрдЯ рдФрд░ рдореЗрдиреВ рдбреЗрдЯрд╛ ---
┬а┬а┬а┬а┬а┬а┬а┬аlet currentView = 'home'; // 'home', 'customer-menu', 'customer-orders', 'admin'
┬а┬а┬а┬а┬а┬а┬а┬аlet menuItems = [];
┬а┬а┬а┬а┬а┬а┬а┬аlet cart = {};
┬а┬а┬а┬а┬а┬а┬а┬аlet restaurantOrders = [];
┬а┬а┬а┬а┬а┬а┬а┬аlet customerOrders = [];
┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а// рдСрд░реНрдбрд░ рд╕реНрдЯреЗрдЯрд╕ рдХреА рд╕рдВрднрд╛рд╡рд┐рдд рдХреБрдВрдЬрд┐рдпрд╛рдБ (Keys for Order Status)
┬а┬а┬а┬а┬а┬а┬а┬аconst orderStatusKeys = ['New Order', 'Preparing', 'Out for Delivery', 'Delivered', 'Cancelled'];
┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а// Firestore рдХрд▓реЗрдХреНрд╢рди рдкрд╛рде
┬а┬а┬а┬а┬а┬а┬а┬аconst menuItemCollectionPath = `artifacts/${appId}/public/data/menu_items`;
┬а┬а┬а┬а┬а┬а┬а┬аconst orderCollectionPath = `artifacts/${appId}/public/data/orders`;

┬а┬а┬а┬а┬а┬а┬а┬а// рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдпреВрдЯрд┐рд▓рд┐рдЯреА рдлрд╝рдВрдХреНрд╢рди
┬а┬а┬а┬а┬а┬а┬а┬аconst log = (message, data = '') => console.log(`[APP LOG] ${message}`, data);

┬а┬а┬а┬а┬а┬а┬а┬а// --- рдореБрдЦреНрдп Firebase рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдФрд░ рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди ---
┬а┬а┬а┬а┬а┬а┬а┬аconst initializeFirebase = async () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtry {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// setLogLevel('debug'); 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аapp = initializeApp(firebaseConfig);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdb = getFirestore(app);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аauth = getAuth(app);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("Firebase рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рд╣реЛ рдЧрдпрд╛ред");

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди рд╕реНрдерд┐рддрд┐ рд╢реНрд░реЛрддрд╛ (Auth state listener)
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аonAuthStateChanged(auth, (user) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (user) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аuserId = user.uid;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдпреВрдЬрд╝рд░ рдкреНрд░рдорд╛рдгреАрдХреГрдд (Authenticated) рд╣реИред UID:", userId);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рд╕рд╛рдЗрди рдЗрди рд╣реЛрдиреЗ рдкрд░ рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо рд╢реНрд░реЛрддрд╛рдУрдВ (listeners) рдХреЛ рд╕реЗрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аsetupOrderListeners(); 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдпрджрд┐ рдпреВрдЬрд╝рд░ рд╣реЛрдо рд╕реНрдХреНрд░реАрди рдкрд░ рд╣реИ, рддреЛ рдЙрд╕реЗ рдореЗрдиреВ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (currentView === 'home') {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аswitchView('customer-menu');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} else {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аuserId = null;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдпреВрдЬрд╝рд░ рд╕рд╛рдЗрди рдЖрдЙрдЯ рдпрд╛ рдкреНрд░рдорд╛рдгреАрдХреГрдд рдирд╣реАрдВ рд╣реИред");
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аisAuthReady = true;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рд╣реЛрдо рд╕реНрдХреНрд░реАрди рдХрд╛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд░реЗрдВрдбрд░ (Initial render)
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аrenderApp(); 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} catch (error) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("Firebase рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рдпрд╛ рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди рд╡рд┐рдлрд▓ рд░рд╣рд╛:", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.getElementById('app-root').innerHTML = showMessage('Firebase рд╕реЗрдЯрдЕрдк рдореЗрдВ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдЖрдИред', 'bg-red-500');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};
┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а// рдПрдиреЛрдирд┐рдорд╕ рд╕рд╛рдЗрди-рдЗрди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди
┬а┬а┬а┬а┬а┬а┬а┬аconst startAppSession = async (username) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtry {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдЧреНрд▓реЛрдмрд▓ рдпреВрдЬрд╝рд░рдирд╛рдо рд╕реЗрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аuserName = username; 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдпреВрдЬрд╝рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рд╛рдЗрди рдЗрди рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕:", userName);

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдСрд░реНрдбрд░реЛрдВ рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдпреВрдиреАрдХ рдпреВрдЬрд╝рд░ рдЖрдИрдбреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рд╣реЗрддреБ рдПрдиреЛрдирд┐рдорд╕ рд░реВрдк рд╕реЗ рд╕рд╛рдЗрди рдЗрди рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (initialAuthToken) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait signInWithCustomToken(auth, initialAuthToken);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} else {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait signInAnonymously(auth);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдпреВрдЬрд╝рд░ рдиреЗ рд╕реЗрд╢рди рд╢реБрд░реВ рдХрд┐рдпрд╛ рдФрд░ рд╕рд╛рдЗрди рдЗрди рд╣реБрдЖред", userId);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// onAuthStateChanged рд╢реНрд░реЛрддрд╛ (listener) рдлрд╛рдпрд░ рд╣реЛрдЧрд╛ рдФрд░ рд╕реНрдЯреЗрдЯ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдЧрд╛, рдлрд┐рд░ switchView рдХреЛ рдХреЙрд▓ рдХрд░реЗрдЧрд╛
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} catch (error) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рдПрдиреЛрдирд┐рдорд╕ рд░реВрдк рд╕реЗ рд╕рд╛рдЗрди рдЗрди рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐:", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.getElementById('home-message').innerHTML = showMessage('рд▓реЙрдЧрд┐рди рд╡рд┐рдлрд▓ рд░рд╣рд╛ред рдХреГрдкрдпрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЬрд╛рдВрдЪреЗрдВред', 'bg-red-500');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдпрджрд┐ рдСрдереЗрдВрдЯрд┐рдХреЗрд╢рди рд╡рд┐рдлрд▓ рд╣реЛ, рддреЛ рдпреВрдЬрд╝рд░рдирд╛рдо рдХреНрд▓рд┐рдпрд░ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аuserName = '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// рд▓реЙрдЧрд┐рди рдмрдЯрди рдХреНрд▓рд┐рдХ рд╣реИрдВрдбрд▓рд░
┬а┬а┬а┬а┬а┬а┬а┬аconst handleLoginClick = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst inputElement = document.getElementById('username-input');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst username = inputElement ? inputElement.value.trim() : '';

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (username.length < 3) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.getElementById('home-message').innerHTML = showMessage('рдХреГрдкрдпрд╛ рдПрдХ рд╡реИрдз рдпреВрдЬрд╝рд░рдирд╛рдо (рдХрдо рд╕реЗ рдХрдо 3 рд╡рд░реНрдг) рджрд░реНрдЬ рдХрд░реЗрдВред', 'bg-red-500');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.getElementById('home-message').innerHTML = '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аwindow.appFunctions.startAppSession(username);
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// --- рд▓реЙрдЧрдЖрдЙрдЯ рдлрд╝рдВрдХреНрд╢рди ---
┬а┬а┬а┬а┬а┬а┬а┬аconst handleLogout = async () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtry {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait signOut(auth); 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдпреВрдЬрд╝рд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд▓реЙрдЧрдЖрдЙрдЯ рд╣реБрдЖред");
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рд▓реЛрдХрд▓ рд╕реНрдЯреЗрдЯ рдХреНрд▓рд┐рдпрд░ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аuserName = '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcart = {};
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рд▓реЙрдЧрд┐рди рд╕реНрдХреНрд░реАрди рдкрд░ рд╡рд╛рдкрд╕ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аswitchView('home'); 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} catch (error) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рд╕рд╛рдЗрди рдЖрдЙрдЯ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐:", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдпрджрд┐ рд╕рд╛рдЗрди рдЖрдЙрдЯ рд╡рд┐рдлрд▓ рд╣реЛ, рддреЛ рднреА рд▓реЛрдХрд▓ рд╕реНрдЯреЗрдЯ рдХреНрд▓рд┐рдпрд░ рдХрд░реЗрдВ рдФрд░ рд╡реНрдпреВ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аuserName = '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcart = {};
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аswitchView('home'); 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};


┬а┬а┬а┬а┬а┬а┬а┬а// --- UI рд░реЗрдВрдбрд░рд┐рдВрдЧ рдлрд╝рдВрдХреНрд╢рди ---

┬а┬а┬а┬а┬а┬а┬а┬аconst showMessage = (text, bgColor = 'bg-primary') => `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="p-4 rounded-lg text-white ${bgColor} shadow-lg mt-4 max-w-sm mx-auto">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${text}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а`;

┬а┬а┬а┬а┬а┬а┬а┬аconst renderHome = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// Sarvottam рдмреНрд░рд╛рдВрдбрд┐рдВрдЧ рдХреЗ рд╕рд╛рде рд╕реБрд░реБрдЪрд┐рдкреВрд░реНрдг рдореЛрдмрд╛рдЗрд▓-рдлрд╝рд░реНрд╕реНрдЯ рд╣реЛрдо рд╕реНрдХреНрд░реАрди
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex flex-col items-center justify-center min-h-screen p-6 bg-secondary text-gray-800">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- рд▓реЛрдЧреЛ рдЯреЗрдХреНрд╕реНрдЯ -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h2 class="text-6xl font-extrabold mb-0 text-primary mt-12">Sarvottam</h2>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-xl font-semibold mb-4 text-accent">Restaurant</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-gray-600 text-lg mb-8 border-b-2 border-accent pb-2">INDIAN VEG CUISINE</p>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="w-full max-w-xs p-6 bg-white rounded-xl shadow-2xl">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h3 class="text-2xl font-bold text-gray-800 mb-4 text-center">рд▓реЙрдЧрд┐рди</h3>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<input id="username-input" type="text" placeholder="рдЕрдкрдирд╛ рдпреВрдЬрд╝рд░рдирд╛рдо рджрд░реНрдЬ рдХрд░реЗрдВ" value="${userName}"
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аclass="w-full px-4 py-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary transition duration-200">

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.handleLoginClick()" 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аclass="w-full bg-accent text-white text-xl font-bold py-3 rounded-xl shadow-lg transition transform hover:scale-[1.02] duration-300">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ардореЗрдиреВ рдкрд░ рдЬрд╛рд░реА рд░рдЦреЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div id="home-message" class="mt-4 text-center"></div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-xs text-gray-500 mt-8">рдСрд░реНрдбрд░ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд, рдЕрд╕реНрдерд╛рдпреА рдпреВрдЬрд╝рд░ рд╕реЗрд╢рди рдмрдирд╛рддреЗ рд╣реИрдВред</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`;
┬а┬а┬а┬а┬а┬а┬а┬а}

┬а┬а┬а┬а┬а┬а┬а┬аconst renderNavBar = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рд╣реЛрдо рд╡реНрдпреВ рдкрд░ рдиреЗрд╡рд┐рдЧреЗрд╢рди рдмрд╛рд░ рдЫрд┐рдкрд╛рдПрдБ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (currentView === 'home') return '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst getButtonClass = (view) => 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcurrentView === view 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а? 'bg-white text-primary font-bold shadow-md' 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а: 'text-white hover:bg-primary-dark';

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<nav class="bg-primary p-4 shadow-xl fixed top-0 w-full z-10">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex justify-between items-center max-w-4xl mx-auto">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h1 class="text-2xl font-extrabold text-white tracking-wider">Sarvottam</h1>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex items-center space-x-2">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.switchView('customer-menu')" class="px-3 py-1 text-sm rounded-full transition-colors ${getButtonClass('customer-menu')}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ардореЗрдиреВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.switchView('customer-orders')" class="px-3 py-1 text-sm rounded-full transition-colors ${getButtonClass('customer-orders')}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ардореЗрд░реЗ рдСрд░реНрдбрд░
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.switchView('admin')" class="px-3 py-1 text-sm rounded-full transition-colors ${getButtonClass('admin')}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ард░реЗрд╕реНрдЯреЛрд░реЗрдВрдЯ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- рд▓реЙрдЧрдЖрдЙрдЯ рдмрдЯрди: рдпреВрдЬрд╝рд░ рдХреЗ рд╕рд╛рдЗрди рдЗрди рд╣реЛрдиреЗ рдкрд░ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${userId ? `<button onclick="window.appFunctions.handleLogout()" class="px-3 py-1 text-sm rounded-full transition-colors bg-red-500 text-white font-bold hover:bg-red-600">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ард▓реЙрдЧрдЖрдЙрдЯ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>` : ''}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</nav>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`;
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst renderCustomerMenu = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (menuItems.length === 0) return showMessage('рдореЗрдиреВ рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ рдпрд╛ рдХреЛрдИ рдЖрдЗрдЯрдо рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИред', 'bg-gray-500');

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst totalPrice = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// --- рдореЗрдиреВ рдЖрдЗрдЯрдо рдХреЛ рдХреИрдЯреЗрдЧрд░реА рджреНрд╡рд╛рд░рд╛ рдЧреНрд░реБрдк рдХрд░рдиреЗ рдХрд╛ рд▓реЙрдЬрд┐рдХ ---
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst groupedMenu = menuItems.reduce((acc, item) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst category = item.category || 'Other'; // рдпрджрд┐ 'category' рдорд┐рд╕рд┐рдВрдЧ рд╣реИ рддреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХреИрдЯреЗрдЧрд░реА
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!acc[category]) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аacc[category] = [];
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аacc[category].push(item);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn acc;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}, {});

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst categories = Object.keys(groupedMenu).sort(); // рдХреИрдЯреЗрдЧрд░реА рдХреЗ рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ рдФрд░ рд╕реЙрд░реНрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlet menuHtml = '';

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдХреИрдЯреЗрдЧрд░реА рдФрд░ рдЙрдирдХреЗ рдЖрдЗрдЯрдо рд░реЗрдВрдбрд░ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcategories.forEach(category => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдХреИрдЯреЗрдЧрд░реА рд╣реЗрдбрд░
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аmenuHtml += `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h3 class="text-2xl font-extrabold text-accent mt-6 mb-4 border-b-2 border-primary pb-1">${category}</h3>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`;

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдХреИрдЯреЗрдЧрд░реА рдХреЗ рдЕрдВрджрд░ рдЖрдЗрдЯрдо
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аmenuHtml += groupedMenu[category].map(item => `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="bg-white p-4 rounded-xl shadow-lg flex justify-between items-center mb-4 border border-gray-100 transition-all hover:shadow-xl">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex-1">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h4 class="text-lg font-semibold text-gray-800">${item.name}</h4>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-primary font-bold">тВ╣${item.price}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm text-gray-500">${item.description}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex items-center space-x-2 ml-4">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.updateCart('${item.id}', -1)" class="bg-red-100 text-primary font-bold text-lg w-8 h-8 rounded-full flex items-center justify-center hover:bg-primary hover:text-white transition duration-200">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а-
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<span class="font-bold text-gray-700 w-6 text-center">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${cart[item.id] ? cart[item.id].quantity : 0}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</span>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.updateCart('${item.id}', 1, '${item.name}', ${item.price})" class="bg-accent text-white font-bold text-lg w-8 h-8 rounded-full flex items-center justify-center hover:bg-green-700 transition duration-200">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а+
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`).join('');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// --- рдХреИрдЯреЗрдЧрд░реА рджреНрд╡рд╛рд░рд╛ рдЧреНрд░реБрдк рдХрд░рдиреЗ рдХрд╛ рд▓реЙрдЬрд┐рдХ рд╕рдорд╛рдкреНрдд ---


┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="max-w-xl mx-auto p-4 pt-16">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">рдореЗрдиреВ</h2>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div>${menuHtml}</div>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- рдХрд╛рд░реНрдЯ рд╕рд╛рд░рд╛рдВрд╢/рдЪреЗрдХрдЖрдЙрдЯ -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div id="cart-summary" class="fixed bottom-0 left-0 right-0 p-4 bg-primary text-white shadow-2xl transition-transform duration-300 ${totalItems > 0 ? '' : 'translate-y-full'}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex justify-between items-center max-w-xl mx-auto">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="text-sm">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<span class="font-bold">${totalItems} рдЖрдЗрдЯрдореНрд╕</span> | рдХреБрд▓: <span class="text-xl font-extrabold">тВ╣${totalPrice}</span>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- 'placeOrder' рдЕрдм рдореЛрдбрд▓ рджрд┐рдЦрд╛рдПрдЧрд╛ -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.placeOrder()" class="bg-white text-primary px-5 py-2 font-bold rounded-lg shadow-xl hover:bg-secondary transition duration-200">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ардСрд░реНрдбрд░ рдкреНрд▓реЗрд╕ рдХрд░реЗрдВ (COD)
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="h-20"></div> <!-- рдлрд┐рдХреНрд╕реНрдб рдХрд╛рд░реНрдЯ рдХреЗ рд▓рд┐рдП рд╕реНрдкреЗрд╕рд░ -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`;
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst renderCustomerOrders = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!userId) return showMessage('рдХреГрдкрдпрд╛ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ, рдкреНрд░рдорд╛рдгреАрдХрд░рдг (authentication) рдкреНрд░рдЧрддрд┐ рдкрд░ рд╣реИ...', 'bg-gray-500');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (customerOrders.length === 0) return showMessage('рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреЛрдИ рдкрд┐рдЫрд▓рд╛ рдСрд░реНрдбрд░ рдирд╣реАрдВ рд╣реИред', 'bg-accent');

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst ordersHtml = customerOrders.map(order => `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="bg-white p-4 rounded-xl shadow-lg mb-4 border-l-4 ${order.status === 'Delivered' ? 'border-green-500' : 'border-primary'}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex justify-between items-center mb-2">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h3 class="text-lg font-bold text-gray-800">рдСрд░реНрдбрд░ #${order.id.substring(0, 8)}</h3>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<span class="px-3 py-1 text-xs font-semibold rounded-full ${order.status === 'Delivered' ? 'bg-green-100 text-green-700' : 'bg-primary text-white'}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${order.status}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</span>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm text-gray-600 mb-2">рд╕рдордп: ${new Date(order.createdAt.seconds * 1000).toLocaleString('en-US')}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-base font-semibold text-primary">рдХреБрд▓: тВ╣${order.totalPrice}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm font-semibold text-accent mt-1">рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐: ${order.paymentMethod || 'N/A'}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<ul class="list-disc list-inside mt-2 text-sm text-gray-700">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${order.items.map(item => `<li>${item.name} x ${item.quantity}</li>`).join('')}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</ul>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-xs mt-2 text-gray-500">рдкрддрд╛: ${order.address || 'рдкрддрд╛ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛'}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`).join('');

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="max-w-xl mx-auto p-4 pt-16">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h2 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2">рдореЗрд░реЗ рдСрд░реНрдбрд░</h2>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div>${ordersHtml}</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`;
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst renderAdminView = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (restaurantOrders.length === 0) return showMessage('рдХреЛрдИ рдирдпрд╛ рдСрд░реНрдбрд░ рдирд╣реАрдВ рд╣реИ! ЁЯОЙ', 'bg-accent');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рд╕реНрдЯреЗрдЯрд╕ рдФрд░ рдлрд┐рд░ рд╕рдордп (рд╕рдмрд╕реЗ рдирдпрд╛ рдкрд╣рд▓реЗ) рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕реЙрд░реНрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst sortedOrders = [...restaurantOrders].sort((a, b) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst statusOrder = orderStatusKeys;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst statusDiff = statusOrder.indexOf(a.status) - statusOrder.indexOf(b.status);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (statusDiff !== 0) return statusDiff;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдпрджрд┐ рд╕реНрдЯреЗрдЯрд╕ рд╕рдорд╛рди рд╣реИ, рддреЛ рд╕рдмрд╕реЗ рдирдпрд╛ рдкрд╣рд▓реЗ рд╕реЙрд░реНрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst ordersHtml = sortedOrders.map(order => `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="bg-white p-4 rounded-xl shadow-lg mb-4 border-l-8 ${order.status === 'New Order' ? 'border-red-500' : 'border-blue-500'}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex justify-between items-start mb-3">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h3 class="text-xl font-extrabold text-gray-900">рдСрд░реНрдбрд░ #${order.id.substring(0, 8)}</h3>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- рдЧреНрд░рд╛рд╣рдХ рдХрд╛ рдирд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВ -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm text-gray-600 font-medium">рдЧреНрд░рд╛рд╣рдХ: ${order.customerName || 'N/A'}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm text-gray-500">рд╕рдордп: ${new Date(order.createdAt.seconds * 1000).toLocaleString('en-US')}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<span class="px-3 py-1 text-xs font-semibold rounded-full ${order.status === 'New Order' ? 'bg-red-500 text-white animate-pulse' : 'bg-gray-200 text-gray-700'}">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${order.status}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</span>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<ul class="list-disc list-inside mt-2 text-base text-gray-700 font-medium">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${order.items.map(item => `<li>${item.name} x ${item.quantity}</li>`).join('')}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</ul>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="mt-4 border-t pt-3">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-base font-semibold text-primary">рдХреБрд▓ рд░рд╛рд╢рд┐: тВ╣${order.totalPrice}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm text-gray-600 font-bold mt-1">рднреБрдЧрддрд╛рди рд╡рд┐рдзрд┐: ${order.paymentMethod || 'N/A'}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm text-gray-600 font-bold mt-1">рдкрддрд╛: ${order.address || 'рдЧреНрд░рд╛рд╣рдХ рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рджрд┐рдпрд╛ рдЧрдпрд╛'}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- рд╕реНрдЯреЗрдЯрд╕ рдЕрдкрдбреЗрдЯ рдбреНрд░реЙрдкрдбрд╛рдЙрди -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="mt-4 flex items-center space-x-2">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<label for="status-select-${order.id}" class="text-sm font-medium text-gray-700">рд╕реНрдЯреЗрдЯрд╕ рдмрджрд▓реЗрдВ:</label>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<select id="status-select-${order.id}" class="block w-full p-2 border border-gray-300 bg-white rounded-md shadow-sm focus:ring-accent focus:border-accent"
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аonchange="window.appFunctions.updateOrderStatus('${order.id}', this.value)">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${orderStatusKeys.map(status => `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<option value="${status}" ${order.status === status ? 'selected' : ''}>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а${status}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</option>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`).join('')}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</select>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`).join('');

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst pendingCount = restaurantOrders.filter(o => o.status !== 'Delivered' && o.status !== 'Cancelled').length;

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn `
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="max-w-xl mx-auto p-4 pt-16">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h2 class="text-3xl font-bold text-primary mb-6 border-b-4 border-primary pb-2">рд╕рднреА рдСрд░реНрдбрд░ (рд░реЗрд╕реНрдЯреЛрд░реЗрдВрдЯ рдбреИрд╢рдмреЛрд░реНрдб)</h2>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-gray-600 mb-4">рдХреБрд▓ рд▓рдВрдмрд┐рдд рдСрд░реНрдбрд░: ${pendingCount}</p>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div>${ordersHtml}</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а`;
┬а┬а┬а┬а┬а┬а┬а┬а};
┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬аconst renderApp = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst root = document.getElementById('app-root');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!isAuthReady) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аroot.innerHTML = showMessage('рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ, рдХреГрдкрдпрд╛ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ...', 'bg-gray-500');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlet content = '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аswitch (currentView) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcase 'home': // рдирдпрд╛ рд╣реЛрдо рд╡реНрдпреВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcontent = renderHome();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аbreak;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcase 'customer-menu':
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcontent = renderCustomerMenu();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аbreak;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcase 'customer-orders':
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcontent = renderCustomerOrders();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аbreak;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcase 'admin':
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcontent = renderAdminView();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аbreak;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdefault:
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcontent = renderHome();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аroot.innerHTML = renderNavBar() + content;
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// --- GPS рдФрд░ рдореЛрдбрд▓ рд▓реЙрдЬрд┐рдХ ---

┬а┬а┬а┬а┬а┬а┬а┬аconst showAddressModal = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst modal = document.getElementById('address-modal');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst addressInput = document.getElementById('manual-address-input');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst gpsStatus = document.getElementById('gps-status');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдореЛрдбрд▓ рджрд┐рдЦрд╛рдиреЗ рдкрд░ рдЗрдирдкреБрдЯ рдХреЛ рдХреНрд▓рд┐рдпрд░ рдХрд░реЗрдВ рдФрд░ рд╕реНрдЯреЗрдЯрд╕ рд░реАрд╕реЗрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аaddressInput.value = '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аgpsStatus.innerHTML = '';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (modal) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аmodal.classList.remove('hidden');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.body.classList.add('overflow-hidden');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst hideAddressModal = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst modal = document.getElementById('address-modal');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (modal) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аmodal.classList.add('hidden');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.body.classList.remove('overflow-hidden');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst attemptGPSLocation = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst gpsStatus = document.getElementById('gps-status');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst addressInput = document.getElementById('manual-address-input');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!navigator.geolocation) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аgpsStatus.innerHTML = '<span class="text-red-500">рдорд╛рдлрд╝ рдХрд░рдирд╛, рдЖрдкрдХрд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ GPS/рдЬрд┐рдпреЛрд▓реЛрдХреЗрд╢рди рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред</span>';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аgpsStatus.innerHTML = '<span class="text-blue-500">GPS рд▓реЛрдХреЗрд╢рди рдкреНрд░рд╛рдкреНрдд рдХрд░ рд░рд╣рд╛ рд╣реИ...</span>';

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аnavigator.geolocation.getCurrentPosition((position) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst lat = position.coords.latitude;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst lon = position.coords.longitude;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst accuracy = position.coords.accuracy;

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдкрддреЗ рдХреЗ рд░реВрдк рдореЗрдВ Lat/Lon рдХреЛ рдЯреЗрдХреНрд╕реНрдЯрдПрд░рд┐рдпрд╛ рдореЗрдВ рднрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аaddressInput.value = `GPS рд▓реЛрдХреЗрд╢рди: Lat: ${lat.toFixed(6)}, Lon: ${lon.toFixed(6)}. (рд╕рдЯреАрдХрддрд╛: ${accuracy} рдореАрдЯрд░)`;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аgpsStatus.innerHTML = `<span class="text-accent font-bold">рд╕рдлрд▓рддрд╛!</span> GPS рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рд╣реБрдЖред (${lat.toFixed(2)}, ${lon.toFixed(2)})`;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдпреВрдЬрд╝рд░ рдХреЛ рдкрддрд╛ рджреЗрдВ рдХрд┐ рд╡реЗ рдЕрднреА рднреА рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕реБрдзрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.getElementById('address-message').innerHTML = 'GPS рдбреЗрдЯрд╛ рднрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЖрдк рдкреБрд╖реНрдЯрд┐ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдкрддрд╛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред';

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}, (error) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// GPS рддреНрд░реБрдЯрд┐ рд╣реИрдВрдбрд▓рд┐рдВрдЧ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlet errorMessage = 'GPS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд░рд╣рд╛ред';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аswitch(error.code) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcase error.PERMISSION_DENIED:
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аerrorMessage = 'GPS рдПрдХреНрд╕реЗрд╕ рдЕрд╕реНрд╡реАрдХреГрддред рдХреГрдкрдпрд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рдЕрдиреБрдорддрд┐ рджреЗрдВред';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аbreak;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcase error.POSITION_UNAVAILABLE:
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аerrorMessage = 'GPS рд▓реЛрдХреЗрд╢рди рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИред';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аbreak;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcase error.TIMEOUT:
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аerrorMessage = 'GPS рдЕрдиреБрд░реЛрдз рдХрд╛ рд╕рдордп рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдпрд╛ред';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аbreak;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdefault:
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аerrorMessage = 'GPS рддреНрд░реБрдЯрд┐: ' + error.message;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аgpsStatus.innerHTML = `<span class="text-red-500">${errorMessage}</span>`;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}, {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аenableHighAccuracy: true,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtimeout: 5000,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аmaximumAge: 0
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// --- рдбреЗрдЯрд╛ рдЗрдВрдЯрд░реЗрдХреНрд╢рди (Firestore) рдлрд╝рдВрдХреНрд╢рди ---

┬а┬а┬а┬а┬а┬а┬а┬аconst fetchMenu = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!db) return;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst q = collection(db, menuItemCollectionPath);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдореЗрдиреВ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд▓рд┐рдП рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо рд╢реНрд░реЛрддрд╛
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аonSnapshot(q, (snapshot) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аmenuItems = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдореЗрдиреВ рд░рд┐рдпрд▓-рдЯрд╛рдЗрдо рдореЗрдВ рдлрд╝реЗрдЪ рдХрд┐рдпрд╛ рдЧрдпрд╛ред", menuItems);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдХреЗрд╡рд▓ рддрднреА рдкреБрдирдГ рд░реЗрдВрдбрд░ рдХрд░реЗрдВ рдЬрдм рд╣рдо рдореЗрдиреВ-рд╕рдВрдмрдВрдзрд┐рдд рд╡реНрдпреВ рдкрд░ рд╣реЛрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (currentView === 'customer-menu') renderApp();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}, (error) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рдореЗрдиреВ рдлрд╝реЗрдЪ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst setupOrderListeners = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!db || !userId) return;

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// 1. рд░реЗрд╕реНрдЯреЛрд░реЗрдВрдЯ (рдПрдбрдорд┐рди) рдСрд░реНрдбрд░ рд╢реНрд░реЛрддрд╛ (рд╕рднреА рдСрд░реНрдбрд░)
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst restaurantQ = query(collection(db, orderCollectionPath));
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аonSnapshot(restaurantQ, (snapshot) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аrestaurantOrders = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдПрдбрдорд┐рди рдХреЗ рд▓рд┐рдП рд╕рднреА рд░реЗрд╕реНрдЯреЛрд░реЗрдВрдЯ рдСрд░реНрдбрд░ рдлрд╝реЗрдЪ рдХрд┐рдП рдЧрдПред", restaurantOrders.length);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (currentView === 'admin') renderApp();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}, (error) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рдПрдбрдорд┐рди рдХреЗ рд▓рд┐рдП рд╕рднреА рдСрд░реНрдбрд░ рдлрд╝реЗрдЪ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// 2. рдЧреНрд░рд╛рд╣рдХ рдХреЗ рдЕрдкрдиреЗ рдСрд░реНрдбрд░ рд╢реНрд░реЛрддрд╛
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst customerQ = query(collection(db, orderCollectionPath), where("customerId", "==", userId));
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аonSnapshot(customerQ, (snapshot) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcustomerOrders = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдирд┐рд░реНрдорд╛рдг рд╕рдордп (рдирдпрд╛ рдкрд╣рд▓реЗ) рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╕реЙрд░реНрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcustomerOrders.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдЧреНрд░рд╛рд╣рдХ рдХреЗ рдСрд░реНрдбрд░ рдлрд╝реЗрдЪ рдХрд┐рдП рдЧрдПред", customerOrders.length);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (currentView === 'customer-orders') renderApp();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}, (error) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рдЧреНрд░рд╛рд╣рдХ рдХреЗ рдСрд░реНрдбрд░ рдлрд╝реЗрдЪ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst updateCart = (itemId, change, name = '', price = 0) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst currentQuantity = cart[itemId] ? cart[itemId].quantity : 0;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst newQuantity = currentQuantity + change;

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (newQuantity <= 0) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdelete cart[itemId];
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} else {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcart[itemId] = {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аname: name,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аprice: price,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аquantity: newQuantity
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а};
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аrenderApp();
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдЕрдм рдХреЗрд╡рд▓ рдореЛрдбрд▓ рджрд┐рдЦрд╛рддрд╛ рд╣реИ
┬а┬а┬а┬а┬а┬а┬а┬аconst placeOrder = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst itemsInCart = Object.values(cart).filter(item => item.quantity > 0);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (itemsInCart.length === 0) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдореЛрдбрд▓ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдПрдХ рдЗрди-рдРрдк рдореИрд╕реЗрдЬ рджрд┐рдЦрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдлрд╝рд┐рд▓рд╣рд╛рд▓ рдХреЗрд╡рд▓ рд╡рд╛рд░реНрдирд┐рдВрдЧ рд▓реЙрдЧ рдХрд░рддреЗ рд╣реИрдВред
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.warn('рдХрд╛рд░реНрдЯ рдЦрд╛рд▓реА рд╣реИ, рдСрд░реНрдбрд░ рдкреНрд▓реЗрд╕ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ред'); 
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдореЛрдбрд▓ рджрд┐рдЦрд╛рдПрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аshowAddressModal();
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// рдореЛрдбрд▓ рд╕реЗ рдСрд░реНрдбрд░ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ Firestore рдореЗрдВ рд╕рд╣реЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдирдпрд╛ рдлрд╝рдВрдХреНрд╢рди
┬а┬а┬а┬а┬а┬а┬а┬аconst finalizeOrder = async () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst itemsInCart = Object.values(cart).filter(item => item.quantity > 0);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst addressInput = document.getElementById('manual-address-input');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst address = addressInput.value.trim();

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!address) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аdocument.getElementById('gps-status').innerHTML = '<span class="text-red-500">рдХреГрдкрдпрд╛ рдбрд┐рд▓реАрд╡рд░реА рдкрддрд╛ рджрд░реНрдЬ рдХрд░реЗрдВ рдпрд╛ GPS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред</span>';
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аhideAddressModal(); // рдСрд░реНрдбрд░ рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдореЛрдбрд▓ рдЫрд┐рдкрд╛рдПрдБ

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst paymentMethod = 'Cash on Delivery (COD)'; // COD рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst totalPrice = itemsInCart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst newOrder = {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcustomerId: userId,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcustomerName: userName, // рдХреИрдкреНрдЪрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдпреВрдЬрд╝рд░рдирд╛рдо рд╢рд╛рдорд┐рд▓ рд╣реИ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аitems: itemsInCart,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtotalPrice: totalPrice,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аaddress: address, // рдореИрдиреНрдпреБрдЕрд▓ рдпрд╛ GPS рдбреЗрдЯрд╛
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аstatus: 'New Order', // рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдЯреЗрдЯрд╕
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аpaymentMethod: paymentMethod, // COD рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcreatedAt: serverTimestamp()
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtry {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait addDoc(collection(db, orderCollectionPath), newOrder);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдирдпрд╛ рдСрд░реНрдбрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкреНрд▓реЗрд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ред");
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcart = {}; // рдСрд░реНрдбрд░ рдкреНрд▓реЗрд╕ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдХрд╛рд░реНрдЯ рдХреНрд▓рд┐рдпрд░ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcurrentView = 'customer-orders'; // рдСрд░реНрдбрд░ рдЯреНрд░реИрдХрд┐рдВрдЧ рд╡реНрдпреВ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аrenderApp();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.log('рдСрд░реНрдбрд░ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкреНрд▓реЗрд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ред');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} catch (error) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рдСрд░реНрдбрд░ рдкреНрд▓реЗрд╕ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error('рдСрд░реНрдбрд░ рдкреНрд▓реЗрд╕ рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд░рд╣рд╛ред');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};
┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬аconst updateOrderStatus = async (orderId, newStatus) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!orderStatusKeys.includes(newStatus)) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog('рдЕрд╡реИрдз рд╕реНрдЯреЗрдЯрд╕ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд┐рдпрд╛ рдЧрдпрд╛ред', newStatus);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аreturn;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtry {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst orderRef = doc(db, orderCollectionPath, orderId);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait updateDoc(orderRef, { status: newStatus });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog(`рдСрд░реНрдбрд░ ${orderId} рд╕реНрдЯреЗрдЯрд╕ рдЕрдкрдбреЗрдЯ рд╣реЛрдХрд░ ${newStatus} рд╣реЛ рдЧрдпрд╛`);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// onSnapshot рд╢реНрд░реЛрддрд╛ (listener) рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╡реНрдпреВ рдХреЛ рдкреБрдирдГ рд░реЗрдВрдбрд░ рдХрд░реЗрдЧрд╛
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} catch (error) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рдСрд░реНрдбрд░ рд╕реНрдЯреЗрдЯрд╕ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ", error);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error('рдСрд░реНрдбрд░ рд╕реНрдЯреЗрдЯрд╕ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рд╡рд┐рдлрд▓ рд░рд╣рд╛ред');
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬аconst switchView = (view) => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аcurrentView = view;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аrenderApp();
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// --- рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореЗрдиреВ рд╕реЗрдЯрдЕрдк (рдкрд╣рд▓реЗ рд░рди рдХреЗ рд▓рд┐рдП) ---
┬а┬а┬а┬а┬а┬а┬а┬аconst setupInitialMenu = async () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!db) return;
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдореЗрдиреВ рдХрд▓реЗрдХреНрд╢рди рдЦрд╛рд▓реА рд╣реИ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst menuRef = collection(db, menuItemCollectionPath);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst docRef = doc(menuRef, "burger-1");
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconst docSnap = await getDoc(docRef);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аif (!docSnap.exists()) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореЗрдиреВ рдЖрдЗрдЯрдо рд╕реЗрдЯ рдХрд░ рд░рд╣рд╛ рд╣реИ...");
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аtry {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдХреИрдЯреЗрдЧрд░реА рдХреЗ рд╕рд╛рде рдореЗрдиреВ рдЖрдЗрдЯрдо
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(docRef, { name: "Aloo Tikki Burger", description: "Delicious potato patty and fresh vegetables.", price: 99, category: "Burgers & Sandwiches" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(doc(menuRef, "pizza-2"), { name: "Paneer Tikka Pizza", description: "Crispy pizza with paneer tikka topping.", price: 249, category: "Pizzas" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(doc(menuRef, "fries-3"), { name: "Peri-Peri Fries", description: "Tangy and spicy flavored fries.", price: 79, category: "Sides" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(doc(menuRef, "shake-4"), { name: "Chocolate Shake", description: "Cold and thick chocolate shake.", price: 129, category: "Beverages" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(doc(menuRef, "vadapav-5"), { name: "Mumbai Vada Pav", description: "Spicy potato fritter in a soft bun.", price: 49, category: "Burgers & Sandwiches" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(doc(menuRef, "soda-6"), { name: "Masala Soda", description: "Refreshing Indian spiced soda.", price: 69, category: "Beverages" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(doc(menuRef, "samosa-7"), { name: "Veg Samosa (2 Pcs)", description: "Crispy fried pastry with spiced potatoes.", price: 60, category: "Sides" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аawait setDoc(doc(menuRef, "margherita-8"), { name: "Classic Margherita", description: "Traditional pizza with mozzarella and basil.", price: 199, category: "Pizzas" });
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореЗрдиреВ рд╕реЗрдЯрдЕрдк рдкреВрд░рд╛ рд╣реБрдЖред");
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} catch (e) {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аconsole.error("рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореЗрдиреВ рд╕реЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рддреНрд░реБрдЯрд┐: ", e);
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а} else {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аlog("рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореЗрдиреВ рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рд╣реИред");
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а}
┬а┬а┬а┬а┬а┬а┬а┬а};
┬а┬а┬а┬а┬а┬а┬а┬а
┬а┬а┬а┬а┬а┬а┬а┬а// --- рдореБрдЦреНрдп рдирд┐рд╖реНрдкрд╛рджрди (Main Execution) ---
┬а┬а┬а┬а┬а┬а┬а┬аwindow.onload = () => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аinitializeFirebase().then(() => {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рд╕рднреА рдпреВрдЬрд╝рд░реНрд╕ рдХреЗ рд▓рд┐рдП рдореЗрдиреВ рддреБрд░рдВрдд рдлрд╝реЗрдЪ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аfetchMenu();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореЗрдиреВ рд╕реЗрдЯрдЕрдк рдЪрд▓рд╛рдПрдБ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аsetupInitialMenu();
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а// рдпреВрдЬрд╝рд░ рдХреЗ рд╕рд╛рдЗрди рдЗрди рд╣реЛрдиреЗ рдкрд░ рдСрд░реНрдбрд░ рд╢реНрд░реЛрддрд╛ (listeners) рдЪрд▓реЗрдВрдЧреЗ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а});
┬а┬а┬а┬а┬а┬а┬а┬а};

┬а┬а┬а┬а┬а┬а┬а┬а// HTML/рдЗрдирд▓рд╛рдЗрди рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд╡реИрд╢реНрд╡рд┐рдХ рд╕реНрддрд░ рдкрд░ рдЙрдЬрд╛рдЧрд░ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬аwindow.appFunctions = {
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аswitchView,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аupdateCart,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аplaceOrder,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аfinalizeOrder, // рдирдпрд╛ рдСрд░реНрдбрд░ рдлрд╛рдЗрдирд▓ рдХрд░рдиреЗ рдХрд╛ рдлрд╝рдВрдХреНрд╢рди
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аupdateOrderStatus,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аhandleLoginClick,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аstartAppSession,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аhandleLogout,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аshowAddressModal,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аhideAddressModal,
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аattemptGPSLocation // рдирдпрд╛ GPS рдлрд╝рдВрдХреНрд╢рди
┬а┬а┬а┬а┬а┬а┬а┬а};
┬а┬а┬а┬а</script>
</head>
<body class="bg-gray-50 font-sans min-h-screen">
┬а┬а┬а┬а<div id="app-root">
┬а┬а┬а┬а┬а┬а┬а┬а<!-- рд╕рд╛рдордЧреНрд░реА (Content) рдпрд╣рд╛рдБ JavaScript рджреНрд╡рд╛рд░рд╛ рд░реЗрдВрдбрд░ рдХреА рдЬрд╛рдПрдЧреА -->
┬а┬а┬а┬а</div>

┬а┬а┬а┬а<!-- рдбрд┐рд▓реАрд╡рд░реА рдПрдбреНрд░реЗрд╕ рдФрд░ GPS рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП рдХрд╕реНрдЯрдо рдореЛрдбрд▓ (Address Modal) -->
┬а┬а┬а┬а<div id="address-modal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-50 flex items-center justify-center p-4">
┬а┬а┬а┬а┬а┬а┬а┬а<div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<h3 class="text-xl font-bold text-gray-800 mb-4">рдбрд┐рд▓реАрд╡рд░реА рдкрддрд╛</h3>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<p class="text-sm text-gray-600 mb-4" id="address-message">рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдкрддрд╛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рджрд░реНрдЬ рдХрд░реЗрдВ, рдпрд╛ GPS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред (рдХреЗрд╡рд▓ COD)</p>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- Address Input -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<textarea id="manual-address-input" rows="3" placeholder="рдкреВрд░рд╛ рдкрддрд╛ рджрд░реНрдЬ рдХрд░реЗрдВ..."
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аclass="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-accent mb-4"></textarea>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- GPS Status/Button -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button id="gps-button" onclick="window.appFunctions.attemptGPSLocation()"
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аclass="w-full bg-blue-500 text-white py-2 rounded-lg font-bold shadow-md hover:bg-blue-600 transition duration-200 mb-3 flex items-center justify-center">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.899a1.002 1.002 0 01-1.414 0l-4.243-4.242m9.192-8.192a5 5 0 00-7.07 0c-1.56 1.56-1.56 4.09 0 5.65l7.07 7.07 7.07-7.07c1.56-1.56 1.56-4.09 0-5.65zM12 11a1 1 0 100-2 1 1 0 000 2z"></path></svg>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аGPS рд▓реЛрдХреЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div id="gps-status" class="text-xs text-center text-gray-500 mb-4"></div>

┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<!-- Action Buttons -->
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<div class="flex space-x-3">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button onclick="window.appFunctions.hideAddressModal()"
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аclass="flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg font-bold hover:bg-gray-400 transition duration-200">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ардХреИрдВрд╕рд┐рд▓ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а<button id="confirm-order-button" onclick="window.appFunctions.finalizeOrder()"
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬аclass="flex-1 bg-accent text-white py-2 rounded-lg font-bold hover:bg-green-700 transition duration-200">
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬ардСрд░реНрдбрд░ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░реЗрдВ
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</button>
┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а┬а┬а┬а┬а</div>
┬а┬а┬а┬а</div>
┬а┬а┬а┬а
┬а┬а┬а┬а<!-- рдпреВрдЬрд╝рд░/рдорд╛рд▓рд┐рдХ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢ -->
┬а┬а┬а┬а<div class="fixed bottom-0 left-0 right-0 bg-yellow-100 p-3 text-xs text-center text-gray-700 border-t border-yellow-300 z-50">
┬а┬а┬а┬а┬а┬а┬а┬а<p class="font-bold">
